
## How We Customized Google Apps for Android Wear

![video_screenshot](images/o5cne6vK-eo.jpg)

** 视频发布时间**
 
> 2014年6月25日

** 视频介绍**

> This talk demonstrates some of the core experiences on Android Wear enabled by Google's first-party apps, and describes the changes we made to these apps to support a better wearable experience.

** 视频推介语 **

>  暂无，待补充。


### 译者信息

| 翻译 | 润稿 | 终审 | 原始链接 | 中文字幕 |  翻译流水号  |  加入字幕组  |
| -- | -- | -- | -- | -- |  -- | -- | -- |
| 兰州夏菜二厂 | xin.zhang | 程路 | [ Youtube ]( https://www.youtube.com/watch?v=o5cne6vK-eo )  |  [ Youtube ]( https://www.youtube.com/watch?v=iRm6vuR41Ts ) | 1503210450 | [ 加入 GDG 字幕组 ]( http://www.gfansub.com/join_translator )  |



### 解说词中文版：

嗨  我是Dan Aminzade  是Android Wear团队的一名攻城狮

如果你制作过安卓APP的话  你可能会困惑如何更新你的APP

使它能够更好地在可穿戴设备上工作

在这个视频里

为了让你更好地了解你可能要做出的改变  我会告诉你

我们是如何更新谷歌自己的APP  使其更好的支持安卓可穿戴设备的

我将重点放在四款APP上

来展示使用Android Wear API开发的不同点  分别是 Gmail

Hangouts  Camera和Google Maps

其中的每个APP展示了

Android Wear API的不同方面的特征

让我们从Gmail开始吧

Gmail会在你的手机上产生两种类型的通知

一种是是像这样  当你收到一封电子邮件时

另一种是像这样  当你有多封未读邮件时

一封电子邮件的通知会包含这封邮件的部分片段

以及2个操作  归档和回复

不对Gmail做任何的改变

该通知会从手机推送到可穿戴设备上

并且会在屏幕上显示为一张卡片

你可以在卡片上滑动来选择回复或归档

问题是回复动作是否能够做的

像在手机上选择一样

让你打开手机里的Gamil APP

然后输入回复内容

所以我们最先想做的

是允许人们说出快速的语音

来回复他们的手表  使他们可以直接通过手腕

回复电子邮件

安卓的通知API现在可以

给通知动作

添加一个远程输入  它告诉Android Wear

在执行动作之前  你可能要通过语音收集

一些自由形式的文本

当我们在Gmail中创建一个通知时

我们对回复动作附上一个远程输入

Android Wear捕获到这个远程输入

不是立即激活这个动作

而是首先打开一个转录UI收集说出的回复内容

在激活手机上的intent之前

将转录文本发送到intent

当Gmail启动并发现这个文本

它会知道需要如何完成回复动作

然后继续并发送邮件

而不用打开手机上的任何UI

所以添加语音回复只需要稍微修改两处代码

首先  改变回复动作以包含一个远程输入

接着  修改从这个动作

接收到的intent的activity

判断intent是否包含一个文本响应

最酷的是通知体验

在手机上并没有改变

如果你选择在手机通知栏中回复通知

Gmail会启动同样的activity

但是由于远程输入不密集

它通常会显示Compose窗口让你输入一个回复

现在  我们来看看多个消息通知的情况

它使用多行收件箱样式

在一个可拓展的设计中

我们需要每个邮件单独显示一张卡片

而不是把一堆短行文本挤在一张卡片上

这些大量的通知卡片

是通知API的一个新特性

不是将所有的电子邮件线程合并在一起

发送一个通知

而是我们发布多个通知  每一封电子邮件一个通知

但是所有这些通知都具有相同的group key

以表明他们是相关的

然后它们在可穿戴设备上被组合为一个卡片包

现在我们得到了一个不错的卡片集合

你可以通过点击包来展开它们

然后分别阅读每张卡片

注意到在包中的每个卡片

可以有自己的动作

所以我们可以在这一组中回复或归档单独的邮件

就像我们处理单独的邮件一样

通知集合还有一个sort key

你可以通过设置来控制在包中的卡片的顺序

你可以标志包中的一个通知

作为一个摘要通知

它是整组通知的代表

对于Gmail  我们采用默认的原始收件箱样式通知

作为摘要

摘要通知

显示在手机通知栏中

没有摘要的包是显示在可穿戴设备上的

接下来  让我们看看Hangouts

Hangouts消息同样可以自动弥合在可穿戴设备上

但是我们想要做些细微的改变

来增强安卓可穿戴设备的体验

和Gmail一样  我们想要语音回复

但是Hangouts的通知是有点不同的

它们没有回复动作

只有一个content intent打开应用程序  以使你可以输入回复内容

这在可穿戴设备上显示为一个手机的Open动作

幸运的是  现在的通知API允许您在手机和可穿戴设备中

指定不同的动作集合

手机动作仅仅会显示在手机上

同样可穿戴设备的动作只会显示在可穿戴设备上

这就允许我们添加一个可穿戴设备仅有的回复动作

包含一个远程输入

却不改变手机的行为

Hangouts 同样使用另一个新的通知功能

即消息页面

我们认为这将很有用  如果在主消息卡片上

滑动侧边栏  你可以在另一个页面

看到最近的历史对话记录

这个不是手机非常必要的

因为你可以打开APP去查看历史对话记录

但是在可穿戴设备上  在回复之前

获得额外的上下文是很有必要的

为了实现这个功能  我们使用WearableExtentder的AddPage方法

它允许你在主要的通知上

添加额外的内容页面

我们把chatHistory设置为第二个bigText style的通知

并将它添加到主通知作为第二页

同样  通知体验在手机上并不会变

但是在可穿戴设备上  我们得到了第二页的内容

来展示聊天记录

这就是Hangouts在可穿戴设备上的一个完整例子

这是一个图片消息  一页仅仅是一个图片

一页仅仅是聊天历史记录  和一个回复动作

来记录一个快速的音频回复

让我们来看Camera

我们想为谷歌摄像APP添加一个有趣的功能

这会让你从你的手腕触发快门

你可能见过具有远程控制功能的高端相机

这里的想法是相同的

你把你的手机放在三脚架上

或是你靠在墙的另一面  或者你让别人帮你拿着相机

然后你通过按可移动设备上的按钮来触发照相

对于Gmail和Hangouts  仅仅通过使用通知API

我们完全实现了手机端的集成

但对于这个例子

制作一个可穿戴设备APP是有意义的

首先  当全屏运行时  

他不会对Camera APP投放消息

在手机上产生影响

所以我们知道手机设备上的行为和可穿戴设备上的

是不对称的

我们也认为  对于这个例子

通过可穿戴设备快门按钮接管整个屏幕是合适的

而不是在屏幕上限制

卡片的按钮功能

所以  我们建立了一个简单的应用程序运行在可穿戴设备上

通过谷歌游戏服务来和主要的Camera APP沟通

当Camera APP准备去拍照的时候

它将设置一个dataItem

表明准备接受远程快门的消息

这个数据项是由智能手表上的可穿戴设备APP的一个service来实现读取的

它上面显示了快门键

按下按钮将发送消息给手机

来触发快门

最后  为了预览你刚刚拍摄的照片

手机应用程序创建了一个缩略图

并将其返回给手表仅作为一个存放数据的物品

可穿戴设备读取内容  并全屏预览

这就是它最终看起来的效果

我在手机上打开Camera APP  然后看到一个写有字符串的卡片

我可以轻触卡片启动一个

具有快门按钮的全屏activity

我轻敲快门按钮  然后经过倒计时后

我的手机拍下来一张照片  并且可以在可移动设备上预览

不错的自拍

让我们来看谷歌地图

在语音导航时

我们想在手腕上显示方向

这会在你走路时非常管用

当你感到拿着你的手机很尴尬时

现在你可以更方便的把手机丢在口袋里

然后来靠你的手表来展示方向啦

因为我们想要在可穿戴设备的

布局和方向的表现上

获得更加细粒度的控制

我们决定制作谷歌地图穿戴APP

来呈现自定义信息而不是单纯的消息推送

我们修改了谷歌地图手机应用程序

来更新对于数据项的描述信息

下一步机动动作图标

和导航状态信息

地图穿戴APP监听数据项的变化

每次改变  它将重新读取新数据

然后更新卡上的数据到到移动设备上

为了绘制这张卡片

可穿戴设备APP使用了WearableExtender的新的displayIntent的功能

你指定一个activity来绘制

通知卡片上的内容

这可以使你随心所欲的画上你想显示的内容在卡片上

而不是被标准的通知样式所局限

卡片在周围低功率模式下  或是峰值状态下

仍需要使用标准的通知模板

但是当你轻触卡片进入到全屏视图后

系统将会改变色调进入自定义视图

由自定义显示activity来绘制

这个有些不爽的是

无论是在峰值模式还是环境模式都不得不使用标准样式

但安卓穿戴设备引用了一些新的

可穿戴设备特定的通知模板  就像大的动作样式

和内容图标样式

最后一个特性

我们同样也想让你开始一个导航会话

通过一个声音命令  比如导航到donuts公司

为了实现这个  地图穿戴应用有一个activity

它具有一个将导航声音动作过滤的intent filter

就像这样来创建一个intent

穿戴式应用收到这个intent

并将一条消息发送给手机上的谷歌地图

包含一个目的地与到达方式

手机地图应用收到这个消息

并开始一个导航会话到目的地

然后你就可以出发了

这就是我们的Gmail Hangoouts Camera 和谷歌地图

都准备好了为安卓穿戴设备而奋斗

我希望它能给你一个很好的介绍关于

你可以在安卓穿戴设备平台上做些什么

我希望它能激发你定制自己的应用程序

来更好的支持可穿戴设备的体验




