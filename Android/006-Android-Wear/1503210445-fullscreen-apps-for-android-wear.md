## Fullscreen apps for Android Wear

![video_screenshot](images/naf_WbtFAlY.jpg)
![](naf_WbtFAlY.jpg)
** 视频发布时间**
 
> 2014年6月25日

** 视频介绍**

>  Learn how to write beautiful apps outside the stream on Android Wear, with a focus on how users leave apps and how to design for a round screen.

** 视频推介语 **

>  暂无，待补充。


### 译者信息

| 翻译 | 润稿 | 终审 | 原始链接 | 中文字幕 |  翻译流水号  |  加入字幕组  |
| -- | -- | -- | -- | -- |  -- | -- | -- |
| eternity | Eric Jin | 程路 | [ Youtube ]( https://www.youtube.com/watch?v=naf_WbtFAlY )  |  [ Youtube ]( https://www.youtube.com/watch?v=mkU55m1YMAg ) | 1503210445 | [ 加入 GDG 字幕组 ]( http://www.gfansub.com/join_translator )  |



### 解说词中文版：

 大家好  我是Will Haldean Brown  我是

Android Wear 团队的一个软件工程师

今天  我给大家说一下为智能手表遍写全屏

沉浸式应用。

许多为安卓智能手表的技术设计方面你会很熟悉

正像平常智能手表

工作的方式一样

然而 我将会和大家说一下两个大的不同的方面

用户是怎么退出应用的

并且怎样设计和实现你的应用

使他在一个圆形的屏幕上看起来更好

我们首先讨论一下用户是怎么退出智能手表上的应用吧

在手机或者平板上  用户会使用返回键

或者home键来退出应用

但是  这些按钮在安卓智能手表设备上是看不到的

作为替代  用户有两种方式来退出应用

通过从屏幕左边滑动  和长按应用

在安卓智能手表上  我们引入一个新的窗口属性

窗口滑动式退出

这个窗口属性可以被指定在你的Activity的主题上

当窗口滑动退出属性设置为TRUE

当你从左边滑动至右边的时候  你的Activity将会退出。

这个滑动退出工作的模式和Viewpaper工作的方式相似

如果Activity的内容的本身就

能滚动  这个窗口将不会退出

除非用户滚动到

内容的边缘  然后再次滑动

这可以让你创建一个极好的  像流动一样的体验

通过滑动仍然可以退出

所有的安卓智能手表的应用的默认

主题  或者从默认的主题下继承的主题

这将可以保证你的安卓智能手表应用有许多的风格

并且看起来很好

它也可以滑动退出

我们识别出那些应用

不能使用滑动退出的功能

例如 一个地图的应用有无穷无尽的界面

是不能达到边界的

如果你不想使用滑动的手势

你能关闭滑动退出属性在你的主题上

通将属性设置为false。

对于不能滑动退出的应用

我们推荐你在应用上用长按的

手势来作为退出按钮

为了告诉用户你的应用支持长压退出的方式

你应该展示一个长时按压的示意

当你的应用被第一次使用的时候

正像你现在在这看到的  在屏幕上某些地方长时按压

会出现一个退出的按钮覆盖在应用的上面

轻点那个按钮结束Activity

他可以带用户回到主界面

为了使你更容易的实现长按退出应用

我们已经为你做了一个UI view的逻辑

让你可以调用退出覆盖视图

加入它到你的应用，

首先，把它加入你你的 activities layout XML里。

确保它添加在一个可以影响

全部布局的地方

你也必须保证视图的大小可以占据整个

屏幕

在这儿  我有一个作为布局的最后一个子框架

设定子框架的高和宽和父框架匹配

这确保它可以占据整个屏幕覆盖一切

现在 让我们看一下你Activity类

在它的onCreate  拉出你的退出界面

并且设置介绍文字。

这些文字会在你第一次开启你的活动的时候展示出来

作为你个覆盖物覆盖你的内容

并且应该告诉用户他们可以长按屏幕来返回home界面

这叫做 showIntroIfNecessary

这些介绍文字只在你的应用

第一次运行的时候显示。

接下来  当你的Activity被长按的时候我们需要将其连接到

显示器上

使用一个GestureDetector和一个SimpleOnGestureListener类

使用这些框架类将会保证

周围的时机姿态

和所有的应用一致

当你得到长按回调

显示你那些退出覆盖层

展现出退出键

如果用户点击这个按钮  你的Activity将会结束

但是如果他们不点击这个按钮

这个覆盖的界面将会自动隐藏

等着下一个展现的呼叫

最后  仍然在你的Activity中  重载

这个onTouchEvent方法

并且将receiveTouchEvents传入GestureDetector

如果GestureDetector返回 true 

你应该返回 真 并且不把这个事件

传递到正常的Activity的onTouchEvent方法中。

如果GestureDetector类返回值为 假 

使用正常的Activity触摸处理。

现在  让我们说一些不同的事情

怎么样使你的应用

在Moto 360的圆形屏幕上变得漂亮

首先  让我们看一下360屏幕的尺寸

它是一个具有320像素的圆

在底部有一个30像素的下巴

因此 这个系统报道说它的型号从320至290像素

当我们了解了整个发展过程

这个链可能会导致一些意想不到的结果

导入现有的布局

例如，看这个action cards  

我们想要想把操作图放在屏幕的中心

但是  当我们设置布局使其垂直居中

这个蓝圈偏移15像素

我们认为最好是

一个中心布局

在屏幕的圆心

在我前面提到的默认的主题里

windowOverscan 属性已经设置了

现在  视图层次的根

被判断是320*320像素

这将导致你应用的顶层视图

以相同的320*320像素 而不是320*290

并且以你的中心布局按照所期望的方式工作

你怎么监测你的Activity在一个圆形的屏幕上的运行呢？

你的views可以请求应用窗口插图

并且得到callback，包含一个窗口插图对象

告诉你Moto360屏幕的形状

它告诉你底层视图是30像素

你要使用这个含义无论在哪儿

你需要放置在下巴以外

在这儿很好的使用这个视图

保证你的应用在将来的设备上看起来更好

为了保存你写的这些样板代码

我们加了一个叫做WatchViewStub的视图

根据你的应用是否在一个长方形或者圆形

的设备上运行

允许你增加两个不同布局的其中一个

你可以使用一个WatchViewStub类作为任何

你想要的为了在圆的屏幕上看起来不同的视图层次的源

使用它  创建一个新的桩，在Activity或fragments 的onCreate

一旦你这样做

你需要给你的桩两个视图布局

一个是为了填充圆形的设备

另一个是为了长方形的设备

尽管这还是一个障碍

因为这些布局不能增加

除非这个视图连接了布局层次

你还没有子框架的权限

相反  增加一个OnLayoutInflatedListener类

当适当的内部布局已经增加的时候

会被调用

这两种退出视图，以及这个WatchViewStub类

都在可用的支持的库里 

它也提供了一个叫做盒嵌入布局的布局管理框架

它扩展了框架布局  允许开发者

在长方形或者圆形的屏幕上使用相同的布局

在这个例子中 左边有一个文本视图

底部的左边有一个取消按钮

底部的右边有一个OK的按钮

当同一个布局被用在圆形的屏幕上

我们想要视图元素放在

圆圈的边缘而不是正中间

这个通过添加可用的布局框

属性来实现

它定义了一组边缘、左、右和底部

去对齐那个圆形中的盒子（矩形）。

这使得很容易得到一个背景出血（译者：出血是一个印刷专有名词）

到整个圆，但其他成员容纳在非剪裁区。

在这儿  你可以看到一个文本视图

框在圆形屏幕中心的正方形

在一个正方形的屏幕上  布局框参数被忽略了

对这个平台我实在很兴奋  我希望你也一样

对你开发的应用我已经迫不及待了